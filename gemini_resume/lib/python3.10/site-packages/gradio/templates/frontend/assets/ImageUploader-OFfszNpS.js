import"./IconButtonWrapper.svelte_svelte_type_style_lang-DAP8_Zsr.js";import"./MarkdownCode.svelte_svelte_type_style_lang-CRfeLYV9.js";import{B as ut}from"./BlockLabel-CnzaitFN.js";import{I as _t}from"./Image-Bsh8Umrh.js";import{W as ft,a as mt,S as dt}from"./SelectSource-CT71dqzj.js";import{g as gt}from"./utils-Gtzs_Zla.js";import{D as tt}from"./DropdownArrow-B7m41FWT.js";import{S as ht}from"./Square-oAGqOwsh.js";import"./StreamingBar.svelte_svelte_type_style_lang-CxOfZBE-.js";import{f as pt}from"./index-Dqmuz79m.js";import{S as bt}from"./StreamingBar-CCUnT5tf.js";import{d as vt}from"./index-Dj1xzGVg.js";import{U as wt}from"./Upload-DSEEphK_.js";/* empty css                                                   */import{I as kt}from"./IconButton-DtUbToT-.js";import{C as $t}from"./Clear-By3xiIwg.js";import{I as yt}from"./IconButtonWrapper-fdTarNL8.js";import{I as It}from"./Image-BRVH1yXn.js";const{SvelteComponent:St,append:Oe,attr:H,detach:Ct,init:Dt,insert:qt,noop:Be,safe_not_equal:Et,svg_element:Me}=window.__gradio__svelte__internal;function Wt(i){let e,t,n;return{c(){e=Me("svg"),t=Me("path"),n=Me("circle"),H(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),H(n,"cx","12"),H(n,"cy","13"),H(n,"r","4"),H(e,"xmlns","http://www.w3.org/2000/svg"),H(e,"width","100%"),H(e,"height","100%"),H(e,"viewBox","0 0 24 24"),H(e,"fill","none"),H(e,"stroke","currentColor"),H(e,"stroke-width","1.5"),H(e,"stroke-linecap","round"),H(e,"stroke-linejoin","round"),H(e,"class","feather feather-camera")},m(l,s){qt(l,e,s),Oe(e,t),Oe(e,n)},p:Be,i:Be,o:Be,d(l){l&&Ct(e)}}}class zt extends St{constructor(e){super(),Dt(this,e,null,Wt,Et,{})}}const{SvelteComponent:Bt,append:Mt,attr:P,detach:jt,init:Rt,insert:Tt,noop:je,safe_not_equal:Ut,svg_element:Pe}=window.__gradio__svelte__internal;function Lt(i){let e,t;return{c(){e=Pe("svg"),t=Pe("circle"),P(t,"cx","12"),P(t,"cy","12"),P(t,"r","10"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"width","100%"),P(e,"height","100%"),P(e,"viewBox","0 0 24 24"),P(e,"stroke-width","1.5"),P(e,"stroke-linecap","round"),P(e,"stroke-linejoin","round"),P(e,"class","feather feather-circle")},m(n,l){Tt(n,e,l),Mt(e,t)},p:je,i:je,o:je,d(n){n&&jt(e)}}}class Nt extends Bt{constructor(e){super(),Rt(this,e,null,Lt,Ut,{})}}const{SvelteComponent:At,append:me,attr:Re,create_component:Ht,destroy_component:Ot,detach:Pt,element:Te,init:Ft,insert:Vt,listen:Gt,mount_component:Jt,noop:Kt,safe_not_equal:Qt,set_style:Xt,space:Yt,text:Zt,transition_in:xt,transition_out:en}=window.__gradio__svelte__internal,{createEventDispatcher:tn}=window.__gradio__svelte__internal;function nn(i){let e,t,n,l,s,r="Click to Access Webcam",a,o,f,u;return l=new ft({}),{c(){e=Te("button"),t=Te("div"),n=Te("span"),Ht(l.$$.fragment),s=Yt(),a=Zt(r),Re(n,"class","icon-wrap svelte-qbrfs"),Re(t,"class","wrap svelte-qbrfs"),Re(e,"class","svelte-qbrfs"),Xt(e,"height","100%")},m(m,y){Vt(m,e,y),me(e,t),me(t,n),Jt(l,n,null),me(t,s),me(t,a),o=!0,f||(u=Gt(e,"click",i[1]),f=!0)},p:Kt,i(m){o||(xt(l.$$.fragment,m),o=!0)},o(m){en(l.$$.fragment,m),o=!1},d(m){m&&Pt(e),Ot(l),f=!1,u()}}}function ln(i){const e=tn();return[e,()=>e("click")]}class rn extends At{constructor(e){super(),Ft(this,e,ln,nn,Qt,{})}}function on(){return navigator.mediaDevices.enumerateDevices()}function sn(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Fe(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(s=>(sn(s,e),s))}function an(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:cn,action_destroyer:un,add_render_callback:_n,append:I,attr:k,binding_callbacks:fn,check_outros:se,create_component:K,create_in_transition:mn,destroy_component:Q,destroy_each:dn,detach:N,element:z,empty:Ne,ensure_array_like:Ve,flush:G,group_outros:ae,init:gn,insert:A,listen:we,mount_component:X,noop:Ae,run_all:hn,safe_not_equal:pn,set_data:_e,set_input_value:Ue,set_style:nt,space:J,src_url_equal:Ge,stop_propagation:bn,text:fe,toggle_class:x,transition_in:S,transition_out:W}=window.__gradio__svelte__internal,{createEventDispatcher:vn,onMount:wn}=window.__gradio__svelte__internal;function Je(i,e,t){const n=i.slice();return n[37]=e[t],n}function kn(i){let e,t,n,l,s,r,a,o,f,u,m;const y=[In,yn],w=[];function q(b,v){return b[2]==="video"||b[1]?0:1}n=q(i),l=w[n]=y[n](i);let _=!i[11]&&Ke(i),p=i[13]&&i[8]&&Qe(i);return{c(){e=z("div"),t=z("button"),l.c(),r=J(),_&&_.c(),a=J(),p&&p.c(),o=Ne(),k(t,"aria-label",s=i[2]==="image"?"capture photo":"start recording"),k(t,"class","svelte-s8feoe"),k(e,"class","button-wrap svelte-s8feoe")},m(b,v){A(b,e,v),I(e,t),w[n].m(t,null),I(e,r),_&&_.m(e,null),A(b,a,v),p&&p.m(b,v),A(b,o,v),f=!0,u||(m=we(t,"click",i[16]),u=!0)},p(b,v){let O=n;n=q(b),n===O?w[n].p(b,v):(ae(),W(w[O],1,1,()=>{w[O]=null}),se(),l=w[n],l?l.p(b,v):(l=w[n]=y[n](b),l.c()),S(l,1),l.m(t,null)),(!f||v[0]&4&&s!==(s=b[2]==="image"?"capture photo":"start recording"))&&k(t,"aria-label",s),b[11]?_&&(ae(),W(_,1,1,()=>{_=null}),se()):_?(_.p(b,v),v[0]&2048&&S(_,1)):(_=Ke(b),_.c(),S(_,1),_.m(e,null)),b[13]&&b[8]?p?(p.p(b,v),v[0]&8448&&S(p,1)):(p=Qe(b),p.c(),S(p,1),p.m(o.parentNode,o)):p&&(ae(),W(p,1,1,()=>{p=null}),se())},i(b){f||(S(l),S(_),S(p),f=!0)},o(b){W(l),W(_),W(p),f=!1},d(b){b&&(N(e),N(a),N(o)),w[n].d(),_&&_.d(),p&&p.d(b),u=!1,m()}}}function $n(i){let e,t,n,l;return t=new rn({}),t.$on("click",i[26]),{c(){e=z("div"),K(t.$$.fragment),k(e,"title","grant webcam access"),nt(e,"height","100%")},m(s,r){A(s,e,r),X(t,e,null),l=!0},p:Ae,i(s){l||(S(t.$$.fragment,s),s&&(n||_n(()=>{n=mn(e,pt,{delay:100,duration:200}),n.start()})),l=!0)},o(s){W(t.$$.fragment,s),l=!1},d(s){s&&N(e),Q(t)}}}function yn(i){let e,t,n;return t=new zt({}),{c(){e=z("div"),K(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"title","capture photo")},m(l,s){A(l,e,s),X(t,e,null),n=!0},p:Ae,i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){W(t.$$.fragment,l),n=!1},d(l){l&&N(e),Q(t)}}}function In(i){let e,t,n,l;const s=[Dn,Cn,Sn],r=[];function a(o,f){return o[1]&&o[10]==="waiting"?0:o[1]&&o[10]==="open"||!o[1]&&o[11]?1:2}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Ne()},m(o,f){r[e].m(o,f),A(o,n,f),l=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(ae(),W(r[u],1,1,()=>{r[u]=null}),se(),t=r[e],t?t.p(o,f):(t=r[e]=s[e](o),t.c()),S(t,1),t.m(n.parentNode,n))},i(o){l||(S(t),l=!0)},o(o){W(t),l=!1},d(o){o&&N(n),r[e].d(o)}}}function Sn(i){let e,t,n,l,s=i[4]("audio.record")+"",r,a;return n=new Nt({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","start recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.record")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&N(e),Q(n)}}}function Cn(i){let e,t,n,l,s=i[4]("audio.stop")+"",r,a;return n=new ht({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","stop recording"),k(e,"class","icon-with-text svelte-s8feoe")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.stop")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&N(e),Q(n)}}}function Dn(i){let e,t,n,l,s=i[4]("audio.waiting")+"",r,a;return n=new mt({}),{c(){e=z("div"),t=z("div"),K(n.$$.fragment),l=J(),r=fe(s),k(t,"class","icon color-primary svelte-s8feoe"),k(t,"title","spinner"),k(e,"class","icon-with-text svelte-s8feoe"),nt(e,"width","var(--size-24)")},m(o,f){A(o,e,f),I(e,t),X(n,t,null),I(e,l),I(e,r),a=!0},p(o,f){(!a||f[0]&16)&&s!==(s=o[4]("audio.waiting")+"")&&_e(r,s)},i(o){a||(S(n.$$.fragment,o),a=!0)},o(o){W(n.$$.fragment,o),a=!1},d(o){o&&N(e),Q(n)}}}function Ke(i){let e,t,n,l,s;return t=new tt({}),{c(){e=z("button"),K(t.$$.fragment),k(e,"class","icon svelte-s8feoe"),k(e,"aria-label","select input source")},m(r,a){A(r,e,a),X(t,e,null),n=!0,l||(s=we(e,"click",i[27]),l=!0)},p:Ae,i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){W(t.$$.fragment,r),n=!1},d(r){r&&N(e),Q(t),l=!1,s()}}}function Qe(i){let e,t,n,l,s,r,a;n=new tt({});function o(m,y){return m[7].length===0?En:qn}let f=o(i),u=f(i);return{c(){e=z("select"),t=z("button"),K(n.$$.fragment),l=J(),u.c(),k(t,"class","inset-icon svelte-s8feoe"),k(e,"class","select-wrap svelte-s8feoe"),k(e,"aria-label","select source")},m(m,y){A(m,e,y),I(e,t),X(n,t,null),I(t,l),u.m(e,null),s=!0,r||(a=[we(t,"click",bn(i[28])),un(He.call(null,e,i[17])),we(e,"change",i[14])],r=!0)},p(m,y){f===(f=o(m))&&u?u.p(m,y):(u.d(1),u=f(m),u&&(u.c(),u.m(e,null)))},i(m){s||(S(n.$$.fragment,m),s=!0)},o(m){W(n.$$.fragment,m),s=!1},d(m){m&&N(e),Q(n),u.d(),r=!1,hn(a)}}}function qn(i){let e,t=Ve(i[7]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Xe(Je(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Ne()},m(l,s){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,s);A(l,e,s)},p(l,s){if(s[0]&384){t=Ve(l[7]);let r;for(r=0;r<t.length;r+=1){const a=Je(l,t,r);n[r]?n[r].p(a,s):(n[r]=Xe(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&N(e),dn(n,l)}}}function En(i){let e,t=i[4]("common.no_devices")+"",n;return{c(){e=z("option"),n=fe(t),e.__value="",Ue(e,e.__value),k(e,"class","svelte-s8feoe")},m(l,s){A(l,e,s),I(e,n)},p(l,s){s[0]&16&&t!==(t=l[4]("common.no_devices")+"")&&_e(n,t)},d(l){l&&N(e)}}}function Xe(i){let e,t=i[37].label+"",n,l,s,r;return{c(){e=z("option"),n=fe(t),l=J(),e.__value=s=i[37].deviceId,Ue(e,e.__value),e.selected=r=i[8].deviceId===i[37].deviceId,k(e,"class","svelte-s8feoe")},m(a,o){A(a,e,o),I(e,n),I(e,l)},p(a,o){o[0]&128&&t!==(t=a[37].label+"")&&_e(n,t),o[0]&128&&s!==(s=a[37].deviceId)&&(e.__value=s,Ue(e,e.__value)),o[0]&384&&r!==(r=a[8].deviceId===a[37].deviceId)&&(e.selected=r)},d(a){a&&N(e)}}}function Wn(i){let e,t,n,l,s,r,a,o,f,u,m;t=new bt({props:{time_limit:i[9]}});const y=[$n,kn],w=[];function q(_,p){return _[12]?1:0}return f=q(i),u=w[f]=y[f](i),{c(){e=z("div"),K(t.$$.fragment),n=J(),l=z("video"),s=J(),r=z("img"),o=J(),u.c(),k(l,"class","svelte-s8feoe"),x(l,"flip",i[3]),x(l,"hide",!i[12]||i[12]&&!!i[0]),Ge(r.src,a=i[0]?.url)||k(r,"src",a),k(r,"class","svelte-s8feoe"),x(r,"hide",!i[12]||i[12]&&!i[0]),k(e,"class","wrap svelte-s8feoe")},m(_,p){A(_,e,p),X(t,e,null),I(e,n),I(e,l),i[25](l),I(e,s),I(e,r),I(e,o),w[f].m(e,null),m=!0},p(_,p){const b={};p[0]&512&&(b.time_limit=_[9]),t.$set(b),(!m||p[0]&8)&&x(l,"flip",_[3]),(!m||p[0]&4097)&&x(l,"hide",!_[12]||_[12]&&!!_[0]),(!m||p[0]&1&&!Ge(r.src,a=_[0]?.url))&&k(r,"src",a),(!m||p[0]&4097)&&x(r,"hide",!_[12]||_[12]&&!_[0]);let v=f;f=q(_),f===v?w[f].p(_,p):(ae(),W(w[v],1,1,()=>{w[v]=null}),se(),u=w[f],u?u.p(_,p):(u=w[f]=y[f](_),u.c()),S(u,1),u.m(e,null))},i(_){m||(S(t.$$.fragment,_),S(u),m=!0)},o(_){W(t.$$.fragment,_),W(u),m=!1},d(_){_&&N(e),Q(t),i[25](null),w[f].d()}}}function He(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function zn(i,e,t){let n,l=[],s=null,r=null,a="closed";const o=g=>{g==="closed"?(t(9,r=null),t(10,a="closed"),t(0,C=null)):g==="waiting"?t(10,a="waiting"):t(10,a="open")},f=g=>{R&&t(9,r=g)};let u,{streaming:m=!1}=e,{pending:y=!1}=e,{root:w=""}=e,{stream_every:q=1}=e,{mode:_="image"}=e,{mirror_webcam:p}=e,{include_audio:b}=e,{i18n:v}=e,{upload:O}=e,{value:C=null}=e;const j=vn();wn(()=>{u=document.createElement("canvas"),m&&_==="image"&&window.setInterval(()=>{n&&!y&&h()},q*1e3)});const $=async g=>{const V=g.target.value;await Fe(b,n,V).then(async re=>{T=re,t(8,s=l.find(oe=>oe.deviceId===V)||null),t(13,Y=!1)})};async function d(){try{Fe(b,n).then(async g=>{t(12,le=!0),t(7,l=await on()),T=g}).then(()=>an(l)).then(g=>{t(7,l=g);const M=T.getTracks().map(V=>V.getSettings()?.deviceId)[0];t(8,s=M&&g.find(V=>V.deviceId===M)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&j("error",v("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")j("error",v("image.allow_webcam_access"));else throw g}}function h(){var g=u.getContext("2d");if((!m||m&&R)&&n.videoWidth&&n.videoHeight){if(u.width=n.videoWidth,u.height=n.videoHeight,g.drawImage(n,0,0,n.videoWidth,n.videoHeight),p&&(g.scale(-1,1),g.drawImage(n,-n.videoWidth,0)),m&&(!R||a==="waiting"))return;if(m){const M=u.toDataURL("image/jpeg");j("stream",M);return}u.toBlob(M=>{j(m?"stream":"capture",M)},`image/${m?"jpeg":"png"}`,.8)}}let R=!1,B=[],T,U,F;function Ie(){if(R){F.stop();let g=new Blob(B,{type:U}),M=new FileReader;M.onload=async function(V){if(V.target){let re=new File([g],"sample."+U.substring(6));const oe=await vt([re]);let ze=(await O(oe,w))?.filter(Boolean)[0];j("capture",ze),j("stop_recording")}},M.readAsDataURL(g)}else{j("start_recording"),B=[];let g=["video/webm","video/mp4"];for(let M of g)if(MediaRecorder.isTypeSupported(M)){U=M;break}if(U===null){console.error("No supported MediaRecorder mimeType");return}F=new MediaRecorder(T,{mimeType:U}),F.addEventListener("dataavailable",function(M){B.push(M.data)}),F.start(200)}t(11,R=!R)}let le=!1;function Se(){_==="image"&&m&&t(11,R=!R),_==="image"?h():Ie(),!R&&T&&(j("close_stream"),T.getTracks().forEach(g=>g.stop()),t(6,n.srcObject=null,n),t(12,le=!1),window.setTimeout(()=>{t(0,C=null)},500),t(0,C=null))}let Y=!1;function Ce(g){g.preventDefault(),g.stopPropagation(),t(13,Y=!1)}function De(g){fn[g?"unshift":"push"](()=>{n=g,t(6,n)})}const qe=async()=>d(),Ee=()=>t(13,Y=!0),We=()=>t(13,Y=!1);return i.$$set=g=>{"streaming"in g&&t(1,m=g.streaming),"pending"in g&&t(20,y=g.pending),"root"in g&&t(21,w=g.root),"stream_every"in g&&t(22,q=g.stream_every),"mode"in g&&t(2,_=g.mode),"mirror_webcam"in g&&t(3,p=g.mirror_webcam),"include_audio"in g&&t(23,b=g.include_audio),"i18n"in g&&t(4,v=g.i18n),"upload"in g&&t(24,O=g.upload),"value"in g&&t(0,C=g.value)},[C,m,_,p,v,He,n,l,s,r,a,R,le,Y,$,d,Se,Ce,o,f,y,w,q,b,O,De,qe,Ee,We]}class Bn extends cn{constructor(e){super(),gn(this,e,zn,Wn,pn,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,i18n:4,upload:24,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),G()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),G()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),G()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),G()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),G()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),G()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),G()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),G()}get upload(){return this.$$.ctx[24]}set upload(e){this.$$set({upload:e}),G()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),G()}get click_outside(){return He}}const Mn=Bn,{SvelteComponent:jn,create_component:it,destroy_component:lt,init:Rn,mount_component:rt,noop:Tn,safe_not_equal:Un,transition_in:ot,transition_out:st}=window.__gradio__svelte__internal,{createEventDispatcher:Ln}=window.__gradio__svelte__internal;function Nn(i){let e,t;return e=new kt({props:{Icon:$t,label:"Remove Image"}}),e.$on("click",i[1]),{c(){it(e.$$.fragment)},m(n,l){rt(e,n,l),t=!0},p:Tn,i(n){t||(ot(e.$$.fragment,n),t=!0)},o(n){st(e.$$.fragment,n),t=!1},d(n){lt(e,n)}}}function An(i){let e,t;return e=new yt({props:{$$slots:{default:[Nn]},$$scope:{ctx:i}}}),{c(){it(e.$$.fragment)},m(n,l){rt(e,n,l),t=!0},p(n,[l]){const s={};l&4&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(ot(e.$$.fragment,n),t=!0)},o(n){st(e.$$.fragment,n),t=!1},d(n){lt(e,n)}}}function Hn(i){const e=Ln();return[e,n=>{e("remove_image"),n.stopPropagation()}]}class On extends jn{constructor(e){super(),Rn(this,e,Hn,An,Un,{})}}const{SvelteComponent:Pn,add_flush_callback:ce,append:de,attr:pe,bind:ue,binding_callbacks:ee,bubble:ge,check_outros:be,create_component:te,create_slot:Fn,destroy_component:ne,detach:ke,element:Le,empty:Vn,flush:D,get_all_dirty_from_scope:Gn,get_slot_changes:Jn,group_outros:ve,init:Kn,insert:$e,listen:Qn,mount_component:ie,noop:Xn,safe_not_equal:Yn,set_style:Ye,space:he,toggle_class:ye,transition_in:E,transition_out:L,update_slot_base:Zn}=window.__gradio__svelte__internal,{createEventDispatcher:xn,tick:ei}=window.__gradio__svelte__internal;function Ze(i){let e,t;return e=new On({}),e.$on("remove_image",i[28]),{c(){te(e.$$.fragment)},m(n,l){ie(e,n,l),t=!0},p:Xn,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function xe(i){let e;const t=i[27].default,n=Fn(t,i,i[42],null);return{c(){n&&n.c()},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s[1]&2048)&&Zn(n,t,l,l[42],e?Jn(t,l[42],s,null):Gn(l[42]),null)},i(l){e||(E(n,l),e=!0)},o(l){L(n,l),e=!1},d(l){n&&n.d(l)}}}function ti(i){let e,t,n=i[3]===null&&xe(i);return{c(){n&&n.c(),e=Vn()},m(l,s){n&&n.m(l,s),$e(l,e,s),t=!0},p(l,s){l[3]===null?n?(n.p(l,s),s[0]&8&&E(n,1)):(n=xe(l),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ve(),L(n,1,1,()=>{n=null}),be())},i(l){t||(E(n),t=!0)},o(l){L(n),t=!1},d(l){l&&ke(e),n&&n.d(l)}}}function ni(i){let e,t,n,l,s;return t=new It({props:{src:i[3].url,alt:i[3].alt_text}}),{c(){e=Le("div"),te(t.$$.fragment),pe(e,"class","image-frame svelte-1ti4ehe"),ye(e,"selectable",i[11])},m(r,a){$e(r,e,a),ie(t,e,null),n=!0,l||(s=Qn(e,"click",i[24]),l=!0)},p(r,a){const o={};a[0]&8&&(o.src=r[3].url),a[0]&8&&(o.alt=r[3].alt_text),t.$set(o),(!n||a[0]&2048)&&ye(e,"selectable",r[11])},i(r){n||(E(t.$$.fragment,r),n=!0)},o(r){L(t.$$.fragment,r),n=!1},d(r){r&&ke(e),ne(t),l=!1,s()}}}function ii(i){let e,t,n,l;function s(o){i[33](o)}function r(o){i[34](o)}let a={root:i[12],value:i[3],mirror_webcam:i[10],stream_every:i[17],streaming:i[9],mode:"image",include_audio:!1,i18n:i[13],upload:i[15]};return i[4]!==void 0&&(a.modify_stream=i[4]),i[5]!==void 0&&(a.set_time_limit=i[5]),e=new Mn({props:a}),ee.push(()=>ue(e,"modify_stream",s)),ee.push(()=>ue(e,"set_time_limit",r)),e.$on("capture",i[35]),e.$on("stream",i[36]),e.$on("error",i[37]),e.$on("drag",i[38]),e.$on("upload",i[39]),e.$on("close_stream",i[40]),{c(){te(e.$$.fragment)},m(o,f){ie(e,o,f),l=!0},p(o,f){const u={};f[0]&4096&&(u.root=o[12]),f[0]&8&&(u.value=o[3]),f[0]&1024&&(u.mirror_webcam=o[10]),f[0]&131072&&(u.stream_every=o[17]),f[0]&512&&(u.streaming=o[9]),f[0]&8192&&(u.i18n=o[13]),f[0]&32768&&(u.upload=o[15]),!t&&f[0]&16&&(t=!0,u.modify_stream=o[4],ce(()=>t=!1)),!n&&f[0]&32&&(n=!0,u.set_time_limit=o[5],ce(()=>n=!1)),e.$set(u)},i(o){l||(E(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){ne(e,o)}}}function et(i){let e,t,n;function l(r){i[41](r)}let s={sources:i[8],handle_clear:i[21],handle_select:i[25]};return i[1]!==void 0&&(s.active_source=i[1]),e=new dt({props:s}),ee.push(()=>ue(e,"active_source",l)),{c(){te(e.$$.fragment)},m(r,a){ie(e,r,a),n=!0},p(r,a){const o={};a[0]&256&&(o.sources=r[8]),!t&&a[0]&2&&(t=!0,o.active_source=r[1],ce(()=>t=!1)),e.$set(o)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){ne(e,r)}}}function li(i){let e,t,n,l,s,r,a,o,f,u,m,y,w=i[8].length>1||i[8].includes("clipboard"),q;e=new ut({props:{show_label:i[7],Icon:_t,label:i[6]||"Image"}});let _=i[3]?.url&&!i[18]&&Ze(i);function p(d){i[30](d)}function b(d){i[31](d)}let v={hidden:i[3]!==null||i[1]==="webcam",filetype:i[1]==="clipboard"?"clipboard":"image/*",root:i[12],max_file_size:i[14],disable_click:!i[8].includes("upload")||i[3]!==null,upload:i[15],stream_handler:i[16],$$slots:{default:[ti]},$$scope:{ctx:i}};i[0]!==void 0&&(v.uploading=i[0]),i[2]!==void 0&&(v.dragging=i[2]),r=new wt({props:v}),i[29](r),ee.push(()=>ue(r,"uploading",p)),ee.push(()=>ue(r,"dragging",b)),r.$on("load",i[20]),r.$on("error",i[32]);const O=[ii,ni],C=[];function j(d,h){return d[1]==="webcam"&&(d[9]||!d[9]&&!d[3])?0:d[3]!==null&&!d[9]?1:-1}~(u=j(i))&&(m=C[u]=O[u](i));let $=w&&et(i);return{c(){te(e.$$.fragment),t=he(),n=Le("div"),_&&_.c(),l=he(),s=Le("div"),te(r.$$.fragment),f=he(),m&&m.c(),y=he(),$&&$.c(),pe(s,"class","upload-container svelte-1ti4ehe"),ye(s,"reduced-height",i[8].length>1),Ye(s,"width",i[3]?"auto":"100%"),pe(n,"data-testid","image"),pe(n,"class","image-container svelte-1ti4ehe")},m(d,h){ie(e,d,h),$e(d,t,h),$e(d,n,h),_&&_.m(n,null),de(n,l),de(n,s),ie(r,s,null),de(s,f),~u&&C[u].m(s,null),de(n,y),$&&$.m(n,null),q=!0},p(d,h){const R={};h[0]&128&&(R.show_label=d[7]),h[0]&64&&(R.label=d[6]||"Image"),e.$set(R),d[3]?.url&&!d[18]?_?(_.p(d,h),h[0]&262152&&E(_,1)):(_=Ze(d),_.c(),E(_,1),_.m(n,l)):_&&(ve(),L(_,1,1,()=>{_=null}),be());const B={};h[0]&10&&(B.hidden=d[3]!==null||d[1]==="webcam"),h[0]&2&&(B.filetype=d[1]==="clipboard"?"clipboard":"image/*"),h[0]&4096&&(B.root=d[12]),h[0]&16384&&(B.max_file_size=d[14]),h[0]&264&&(B.disable_click=!d[8].includes("upload")||d[3]!==null),h[0]&32768&&(B.upload=d[15]),h[0]&65536&&(B.stream_handler=d[16]),h[0]&8|h[1]&2048&&(B.$$scope={dirty:h,ctx:d}),!a&&h[0]&1&&(a=!0,B.uploading=d[0],ce(()=>a=!1)),!o&&h[0]&4&&(o=!0,B.dragging=d[2],ce(()=>o=!1)),r.$set(B);let T=u;u=j(d),u===T?~u&&C[u].p(d,h):(m&&(ve(),L(C[T],1,1,()=>{C[T]=null}),be()),~u?(m=C[u],m?m.p(d,h):(m=C[u]=O[u](d),m.c()),E(m,1),m.m(s,null)):m=null),(!q||h[0]&256)&&ye(s,"reduced-height",d[8].length>1),h[0]&8&&Ye(s,"width",d[3]?"auto":"100%"),h[0]&256&&(w=d[8].length>1||d[8].includes("clipboard")),w?$?($.p(d,h),h[0]&256&&E($,1)):($=et(d),$.c(),E($,1),$.m(n,null)):$&&(ve(),L($,1,1,()=>{$=null}),be())},i(d){q||(E(e.$$.fragment,d),E(_),E(r.$$.fragment,d),E(m),E($),q=!0)},o(d){L(e.$$.fragment,d),L(_),L(r.$$.fragment,d),L(m),L($),q=!1},d(d){d&&(ke(t),ke(n)),ne(e,d),_&&_.d(),i[29](null),ne(r),~u&&C[u].d(),$&&$.d()}}}function ri(i,e,t){let n,{$$slots:l={},$$scope:s}=e,{value:r=null}=e,{label:a=void 0}=e,{show_label:o}=e,{sources:f=["upload","clipboard","webcam"]}=e,{streaming:u=!1}=e,{pending:m=!1}=e,{mirror_webcam:y}=e,{selectable:w=!1}=e,{root:q}=e,{i18n:_}=e,{max_file_size:p=null}=e,{upload:b}=e,{stream_handler:v}=e,{stream_every:O}=e,{modify_stream:C}=e,{set_time_limit:j}=e,$,{uploading:d=!1}=e,{active_source:h=null}=e;function R({detail:c}){u||(t(3,r=c),U("upload"))}function B(){t(3,r=null),U("clear"),U("change",null)}async function T(c,Z){if(Z==="stream"){U("stream",{value:{url:c},is_value_data:!0});return}t(26,m=!0);const ct=await $.load_files([new File([c],`image/${u?"jpeg":"png"}`)]);(Z==="change"||Z==="upload")&&(t(3,r=ct?.[0]||null),await ei(),U("change")),t(26,m=!1)}const U=xn();let{dragging:F=!1}=e;function Ie(c){let Z=gt(c);Z&&U("select",{index:Z,value:null})}async function le(c){switch(c){case"clipboard":$.paste_clipboard();break}}const Se=()=>{t(3,r=null),U("clear")};function Y(c){ee[c?"unshift":"push"](()=>{$=c,t(19,$)})}function Ce(c){d=c,t(0,d)}function De(c){F=c,t(2,F)}function qe(c){ge.call(this,i,c)}function Ee(c){C=c,t(4,C)}function We(c){j=c,t(5,j)}const g=c=>T(c.detail,"change"),M=c=>T(c.detail,"stream");function V(c){ge.call(this,i,c)}function re(c){ge.call(this,i,c)}const oe=c=>T(c.detail,"upload");function ze(c){ge.call(this,i,c)}function at(c){h=c,t(1,h),t(8,f)}return i.$$set=c=>{"value"in c&&t(3,r=c.value),"label"in c&&t(6,a=c.label),"show_label"in c&&t(7,o=c.show_label),"sources"in c&&t(8,f=c.sources),"streaming"in c&&t(9,u=c.streaming),"pending"in c&&t(26,m=c.pending),"mirror_webcam"in c&&t(10,y=c.mirror_webcam),"selectable"in c&&t(11,w=c.selectable),"root"in c&&t(12,q=c.root),"i18n"in c&&t(13,_=c.i18n),"max_file_size"in c&&t(14,p=c.max_file_size),"upload"in c&&t(15,b=c.upload),"stream_handler"in c&&t(16,v=c.stream_handler),"stream_every"in c&&t(17,O=c.stream_every),"modify_stream"in c&&t(4,C=c.modify_stream),"set_time_limit"in c&&t(5,j=c.set_time_limit),"uploading"in c&&t(0,d=c.uploading),"active_source"in c&&t(1,h=c.active_source),"dragging"in c&&t(2,F=c.dragging),"$$scope"in c&&t(42,s=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&258&&!h&&f&&t(1,h=f[0]),i.$$.dirty[0]&514&&t(18,n=u&&h==="webcam"),i.$$.dirty[0]&262145&&d&&!n&&t(3,r=null),i.$$.dirty[0]&4&&U("drag",F)},[d,h,F,r,C,j,a,o,f,u,y,w,q,_,p,b,v,O,n,$,R,B,T,U,Ie,le,m,l,Se,Y,Ce,De,qe,Ee,We,g,M,V,re,oe,ze,at,s]}class oi extends Pn{constructor(e){super(),Kn(this,e,ri,li,Yn,{value:3,label:6,show_label:7,sources:8,streaming:9,pending:26,mirror_webcam:10,selectable:11,root:12,i18n:13,max_file_size:14,upload:15,stream_handler:16,stream_every:17,modify_stream:4,set_time_limit:5,uploading:0,active_source:1,dragging:2},null,[-1,-1])}get value(){return this.$$.ctx[3]}set value(e){this.$$set({value:e}),D()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),D()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),D()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),D()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),D()}get pending(){return this.$$.ctx[26]}set pending(e){this.$$set({pending:e}),D()}get mirror_webcam(){return this.$$.ctx[10]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),D()}get selectable(){return this.$$.ctx[11]}set selectable(e){this.$$set({selectable:e}),D()}get root(){return this.$$.ctx[12]}set root(e){this.$$set({root:e}),D()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),D()}get max_file_size(){return this.$$.ctx[14]}set max_file_size(e){this.$$set({max_file_size:e}),D()}get upload(){return this.$$.ctx[15]}set upload(e){this.$$set({upload:e}),D()}get stream_handler(){return this.$$.ctx[16]}set stream_handler(e){this.$$set({stream_handler:e}),D()}get stream_every(){return this.$$.ctx[17]}set stream_every(e){this.$$set({stream_every:e}),D()}get modify_stream(){return this.$$.ctx[4]}set modify_stream(e){this.$$set({modify_stream:e}),D()}get set_time_limit(){return this.$$.ctx[5]}set set_time_limit(e){this.$$set({set_time_limit:e}),D()}get uploading(){return this.$$.ctx[0]}set uploading(e){this.$$set({uploading:e}),D()}get active_source(){return this.$$.ctx[1]}set active_source(e){this.$$set({active_source:e}),D()}get dragging(){return this.$$.ctx[2]}set dragging(e){this.$$set({dragging:e}),D()}}const Si=oi;export{Si as I,Mn as W};
//# sourceMappingURL=ImageUploader-OFfszNpS.js.map
